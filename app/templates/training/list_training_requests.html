{% extends "base.html" %}

{% block content %}
    <h1>{{ _('Pending Training Requests') }}</h1>
    <p>{{ _('Review and manage training requests submitted by users.') }}</p>

    {% if requests %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>{{ _('ID') }}</th>
                <th>{{ _('Requester') }}</th>
                <th>{{ _('Request Date') }}</th>
                <th>{{ _('Skills Requested') }}</th>
                <th>{{ _('Status') }}</th>
                <th>{{ _('Actions') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for req in requests %}
            <tr>
                <td>{{ req.id }}</td>
                <td>{{ req.requester.full_name }}</td>
                <td>{{ req.request_date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>
                    {% for skill in req.skills_requested %}
                        <span class="badge bg-info">{{ skill.name }}</span>
                    {% else %}
                        N/A
                    {% endfor %}
                </td>
                <td>{{ req.status.value }}</td>
                <td>
                    <a href="{{ url_for('training.create_training_session_from_request', request_id=req.id) }}" class="btn btn-sm btn-primary">{{ _('Create Session') }}</a>
                    {# TODO: Add options to reject/approve request without creating session #}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>{{ _('No pending training requests.') }}</p>
    {% endif %}

    <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary mt-3">{{ _('Back to Dashboard') }}</a>
{% endblock %}
