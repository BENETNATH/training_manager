{% extends "base.html" %}

{% block content %}
    <h1>Pending Training Requests</h1>
    <p>Review and manage training requests submitted by users.</p>

    {% if requests %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Requester</th>
                <th>Request Date</th>
                <th>Skills Requested</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for req in requests %}
            <tr>
                <td>{{ req.id }}</td>
                <td>{{ req.requester.full_name }}</td>
                <td>{{ req.request_date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>
                    {% for skill in req.skills_requested %}
                        <span class="badge bg-info">{{ skill.name }}</span>
                    {% else %}
                        N/A
                    {% endfor %}
                </td>
                <td>{{ req.status.value }}</td>
                <td>
                    <a href="{{ url_for('training.create_training_session_from_request', request_id=req.id) }}" class="btn btn-sm btn-primary">Create Session</a>
                    {# TODO: Add options to reject/approve request without creating session #}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No pending training requests.</p>
    {% endif %}

    <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary mt-3">Back to Dashboard</a>
{% endblock %}
